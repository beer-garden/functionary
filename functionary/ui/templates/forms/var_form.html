{% load widget_tweaks %}
{{ form.non_field_errors }}
{% for hidden_field in form.hidden_fields %}
    {{ hidden_field.errors }}
    {{ hidden_field }}
{% endfor %}
<div class="columns is-multiline is-mobile">
    <div class="field column is-half">
        <label class="{% if form.name.errors %}errors{% endif %} label" for={{ form.name.id_for_label }}>Name:
        </label>
        {% render_field form.name class="input" placeholder=form.name.name %}
        {{ form.name.errors }}
    </div>
    <div class="field column is-half">
        <label class="label" for={{ form.name.id_for_label }}>Protect:
        </label>
        {% render_field form.protect class="checkbox" %}
    </div>
    <div class="field column is-half">
        <label class="label{% if form.description.errors %} errors{% endif %}" for={{ form.description.id_for_label }}>Description:
        </label>
        {% render_field form.description class="textarea" placeholder=form.description.name rows=4 %}
        {{ form.description.errors }}
    </div>
    <div class="field column is-half">
        <label class="{% if form.value.errors %}errors{% endif %} label" for={{ form.value.id_for_label }}>Value:
        </label>
        {% render_field form.value class="textarea" placeholder=form.value.name rows=4 %}
        {{ form.value.errors }}
    </div>
</div>
{% if variable %}
    <button class="button"
            type="submit"
            onclick="disableVariableButtons(false)"
            hx-post="{% url 'ui:update-variable' variable.id parent_id %}">
        Update
    </button>
    <button class="button"
            onclick="disableVariableButtons(false)"
            hx-get="{% url 'ui:detail-variable' pk=variable.id %}">
        Cancel
    </button>
{% else %}
    <button id="add-variable-button1"
            class="button"
            type="submit"
            onclick="disableVariableButtons(false)"
            hx-params="not environment, team"
            hx-post="{% url 'ui:add-variable' parent_id %}">
        Add
    </button>
    <button class="button"
            onclick="htmx.remove(htmx.find('#add_variable_form')); disableVariableButtons(false)">
        Cancel
    </button>
{% endif %}
